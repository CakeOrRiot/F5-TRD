Применение теоремы Шпрага-Гранди
Опишем наконец целостный алгоритм, применимый 
к любой равноправной игре двух игроков для определения
 выигрышности/проигрышности текущего состояния v.

Функция, которая каждому состоянию игры ставит в 
соответствие ним-число, называется функцией Шпрага-Гранди.

Итак, чтобы посчитать функцию Шпрага-Гранди для текущего 
состояния некоторой игры, нужно:

Выписать все возможные переходы из текущего состояния.
Каждый такой переход может вести либо в одну игру,
либо в сумму независимых игр.
В первом случае — просто посчитаем функцию Гранди 
рекурсивно для этого нового состояния.

Во втором случае, когда переход из текущего состояния приводит 
в сумму нескольких независимых игр — 
рекурсивно посчитаем для каждой из этих игр функцию Гранди, 
а затем скажем, что функция Гранди суммы игр равна XOR-сумме значений этих игр.

После того, как мы посчитали функцию Гранди 
для каждого возможного перехода — считаем mex от этих значений, 
и найденное число — и есть искомое значение Гранди для текущего состояния.
Если полученное значение Гранди равно нулю, 
то текущее состояние проигрышно, иначе — выигрышно.

функция mex от множества чисел возвращает наименьшее неотрицательное число,
 не встречающееся в этом множестве
